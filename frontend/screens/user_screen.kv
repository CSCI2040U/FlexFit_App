<UserScreen>:
    name: 'user'
    MDBoxLayout:
        orientation: 'vertical'

        ScrollView:
            size_hint_y: 0.85  # Limits scrollable area, ensuring bottom navbar stays in place

            MDBoxLayout:
                orientation: 'vertical'
                padding: dp(20)
                spacing: dp(40)
                size_hint_y: None
                height: self.minimum_height  # Expands dynamically to fit content

                # Profile Section
                MDBoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: dp(180)
                    spacing: dp(20)
                    pos_hint: {'center_x': 0.5}

                    AsyncImage:
                        source: "assets/logo.png"
                        size_hint: None, None
                        size: dp(120), dp(120)
                        allow_stretch: True
                        keep_ratio: True
                        pos_hint: {'center_x': 0.5}

                    MDLabel:
                        id: greeting_user_text
                        text: ""
                        bold: True
                        font_style: "H5"
                        halign: "center"
                        theme_text_color: "Primary"

                # Height and Weight Section
                MDBoxLayout:
                    orientation: 'horizontal'
                    spacing: dp(30)
                    size_hint_x: None
                    width: dp(380)
                    size_hint_y: None
                    height: dp(160)  # Ensures proper display
                    pos_hint: {'center_x': 0.5}

                    # Height Card
                    MDCard:
                        size_hint: None, None
                        size: dp(160), dp(160)
                        elevation: 1
                        radius: [15]
                        padding: dp(10)
                        pos_hint: {"center_x": 0.5}

                        MDBoxLayout:
                            orientation: 'vertical'
                            spacing: dp(5)
                            pos_hint: {'center_x': 0.5}

                            MDLabel:
                                text: "Height"
                                halign: "center"
                                font_style: "Subtitle2"
                                theme_text_color: "Secondary"

                            MDLabel:
                                id: height_label
                                text: ""
                                halign: "center"
                                font_style: "H5"
                                theme_text_color: "Primary"

                            MDIconButton:
                                icon: "pencil"
                                user_font_size: "20sp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Secondary"
                                on_release: app.edit_height()

                    # Weight Card
                    MDCard:
                        size_hint: None, None
                        size: dp(160), dp(160)
                        elevation: 1
                        radius: [15]
                        padding: dp(10)
                        pos_hint: {"center_x": 0.5}

                        MDBoxLayout:
                            orientation: 'vertical'
                            spacing: dp(5)
                            pos_hint: {'center_x': 0.5}

                            MDLabel:
                                text: "Weight"
                                halign: "center"
                                font_style: "Subtitle2"
                                theme_text_color: "Secondary"

                            MDLabel:
                                id: weight_label
                                text: ""
                                halign: "center"
                                font_style: "H5"
                                theme_text_color: "Primary"

                            MDIconButton:
                                icon: "pencil"
                                user_font_size: "20sp"
                                pos_hint: {"center_x": 0.5}
                                theme_text_color: "Secondary"
                                on_release: app.edit_weight()

                # Buttons Section
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: dp(10)
                    spacing: dp(10)
                    size_hint_y: None
                    height: dp(120)
                    pos_hint: {"center_x": 0.5}

                    MDRaisedButton:
                        text: "Logout"
                        md_bg_color: 0.8, 0.1, 0.1, 1
                        size_hint_x: 0.8
                        pos_hint: {"center_x": 0.5}
                        on_release: app.logout_user()

        # Bottom Navigation Section (Fixed at Bottom)
        MDBottomNavigation:
            id: bottom_nav
            panel_color: "#eeeeee"
            pos_hint: {"bottom": 1}
            size_hint_y: 1/4
            radius: dp(10)

            MDBottomNavigationItem:
                name: "home"
                text: "Home"
                icon: "home"
                on_tab_press: app.switch_to_screen("home")

            MDBottomNavigationItem:
                name: "saved"
                text: "Saved"
                icon: "bookmark"
                on_tab_press: app.switch_to_screen("saved")

            MDBottomNavigationItem:
                name: "user"
                text: "User"
                icon: "account"
                on_tab_press: app.switch_to_screen("user")

            MDBottomNavigationItem:
                name: "progress"
                text: "Progress"
                icon: "chart-line"
                on_tab_press: app.switch_to_screen("progress")
